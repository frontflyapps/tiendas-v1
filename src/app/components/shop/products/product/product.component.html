<div [id]="'ProductCardId' + product.id"
     fxLayout="column"
     fxLayoutAlign="start stretch"
     fxLayout.lt-md="row"
     fxLayoutAlign.lt-md="start start"
     class="card-product"
     style="position: relative">
  <div *ngIf="inLoading" class="loading-shade" style="height: 100%">
    <mat-spinner [diameter]="40" *ngIf="inLoading"></mat-spinner>
  </div>
  <div fxFlex.lt-md="120px" fxLayoutAlign="center center" class="image-layout">
    <a
      class="product-link"
      fxFlex="row"
      fxLayoutAlign="center center"
      [routerLink]="['/product']"
      [queryParams]="{
        productId: product?.id,
        stockId: product?.Stock?.id
      }"
    >
      <img
        class="image"
        ngp-lazy
        ngp-threshold="0.1"
        *ngIf="product.Images && product.Images.length"
        onerror="this.onerror=null;this.src='../../../../assets/images/noImage.jpg';"
        [src]="imageUrl + product.Images[0].image"
        alt="Image not found"
      />
      <img
        class="image"
        ngp-lazy
        ngp-threshold="0.1"
        *ngIf="!(product.Images && product.Images.length)"
        src="../../../../assets/images/noImage.jpg"
        alt="Image not found"
      />
    </a>
  </div>

  <div fxLayout="column" class="product-info-wrapper" ngClass.gt-sm="p-3" ngClass.lt-md="p-2 w-100">
    <span class="category">
      {{ utilsService.parserLanguage(product.Category.name, language) }}
    </span>

    <div class="title mt-1">
      <a class="link-nav-a"
         [routerLink]="['/product']"
         [queryParams]="{
          productId: product?.id,
          stockId: product?.Stock?.id}">
        {{ product.name[language] ? product.name[language] : product.name['es'] }}
      </a>
    </div>

    <!-- <div style="flex: 1 1 100%"></div> -->

    <div class="mt-2">
      <ngp-rating-material [value]="product.rating" [config]="{ readOnly: true }"></ngp-rating-material>
    </div>
    <!-- <p fxHide.xs class="module line-clamp mt-1 mb-2">
      {{(product.shortDescription[language])?product.shortDescription[language]:product.shortDescription['es']}}</p> -->

    <div class="price mt-1" fxLayout="row" fxLayoutAlign="space-between start">
      <button
        matTooltip="{{ 'AÃ±adir al carrito' | translate }}"
        class="btnAddCart"
        mat-mini-fab
        (click)="addToCart(product)"
        style="z-index: 10"
      >
        <mat-icon>shopping_cart</mat-icon>
      </button>
      <div>
        <div *ngIf="product.offerValue">
          <p style="font-size: 12px" class="m-0">
            <del style="color: #616161">{{ product | parsePriceProduct }}</del>
            <!-- <span style="color: #e53935; font-size: 12px;" class="ml-2 px-0">{{product.offerValue}}<span
                style="color: #e53935; font-size: 12px;" *ngIf="product.isPercent">% </span>off</span> -->
          </p>
          <p class="mat-body-2 m-0 price-offer">{{ product | parsePriceProduct: 'offert' }}</p>
          <!-- <p class="mat-body-2 m-0" style="font-size: 15px;">
            {{'Desde'|translate}}
            {{product.minSale}}
            {{' unidades'|translate}}
          </p> -->
        </div>

        <div *ngIf="!product.offerValue">
          <p class="mat-body-2 m-0 price-offer">{{ product | parsePriceProduct }}</p>
          <!-- <p class="mat-body-2 m-0" style="font-size: 15px;">
            {{'Desde'|translate}}
            {{product.minSale}}
            {{' unidades'|translate}}
          </p> -->
        </div>
      </div>
    </div>
    <div class="icons" fxLayout="column">
      <!-- <a (click)="addToWishlist(product)">
          <mat-icon class="mat-icon-lg mat-icon material-icons mr-10">favorite_border</mat-icon>
        </a> -->
      <!-- <a (click)="openProductDialog(product)">
          <mat-icon>info</mat-icon>
        </a> -->
      <!-- <a (click)="addToCompare(product)">
          <mat-icon>cached</mat-icon>
        </a> -->
    </div>
  </div>
</div>

<!-- <div class="my-3" style="display: block;margin: 0;border-top-width: 1.5px;border-top-style: solid;border-top-color: rgba(0, 0, 0, 0.12);">
</div> -->
