<form [formGroup]="form">
    <mat-dialog-content>
        <h2>{{ 'Editar Orden' | translate }}</h2>

        <div fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="gappx">

            <p class="mat-body-2 my-2" style="text-transform: uppercase">
                {{ 'Datos personales del destinatario' | translate }}
                <mat-icon
                  style="cursor: pointer"
                  matTooltip="{{ 'Name and surname of the client as well as a confirmation email' | translate }}"
                  class="iconHelp"
                  >help
                </mat-icon>
              </p>

            <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                <mat-form-field fxFlex="100" fxFlex.gt-md="48" fxFlex.md="48" appearance="outline">
                  <mat-label>{{ 'Name' | translate }}</mat-label>
                  <input
                    required
                    matInput
                    placeholder="{{ 'Name' | translate }}"
                    required
                    [formControl]="this.form.controls['name']"
                  />
                  <mat-error *ngIf="form.controls['name'].hasError('required')">
                    {{ 'Name' | translate }} <strong>{{ 'is required' | translate }}</strong>
                  </mat-error>
                </mat-form-field>
  
                <mat-form-field fxFlex="100" fxFlex.gt-md="48" fxFlex.md="48" appearance="outline">
                  <mat-label>{{ 'Lastname' | translate }}</mat-label>
                  <input
                    required
                    matInput
                    placeholder="{{ 'Lastname' | translate }}"
                    required
                    [formControl]="this.form.controls['lastName']"
                  />
                  <mat-error *ngIf="form.controls['lastName'].hasError('required')">
                    {{ 'Lastname' | translate }} <strong>{{ 'is required' | translate }}</strong>
                  </mat-error>
                </mat-form-field>
            </div>

            <mat-form-field appearance="outline">
                <mat-label>{{ 'Email' | translate }}</mat-label>
                <input
                  matInput
                  placeholder="{{ 'Mail for order confirmation and customer contact ' | translate }}"
                  required
                  [formControl]="this.form.controls['email']"
                />
                <mat-error *ngIf="form.controls['email'].hasError('required')">
                  {{ 'Email' | translate }} <strong>{{ 'is required' | translate }}</strong>
                </mat-error>
            </mat-form-field>

            <p class="mat-body-2 my-2" style="text-transform: uppercase">
                {{ 'Datos del destinatario' | translate }}
                <mat-icon
                  style="cursor: pointer"
                  matTooltip="{{ 'Street address and more information about the shipping address' | translate }}"
                  class="iconHelp"
                  >help
                </mat-icon>
            </p>

             <!-- SOLO PARA CUBANOS -->
             <ng-container *ngIf="onlyCubanPeople">
                <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                  <mat-form-field fxFlex="48" fxFlex.lt-md="100" appearance="outline">
                    <mat-label>{{ 'Provincia' | translate }}</mat-label>
                    <mat-select
                      [compareWith]="compareById"
                      required
                      type="text"
                      placeholder="{{ 'Nombre de la provincia' | translate }}"
                      [formControl]="form.controls['ProvinceId']"
                      (selectionChange)="onSelectProvince($event.value)"
                    >
                      <mat-option *ngFor="let province of allProvinces" [value]="province.id">
                        {{ province.name }}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="form.controls['ProvinceId'].hasError('required')">
                      {{ 'Provincia' | translate }} <strong>{{ 'is required' | translate }}</strong>
                    </mat-error>
                  </mat-form-field>
  
                  <mat-form-field fxFlex="48" fxFlex.lt-md="100" appearance="outline">
                    <mat-label>{{ 'Municipio' | translate }}</mat-label>
                    <mat-select
                      [compareWith]="compareById"
                      required
                      type="text"
                      placeholder="{{ 'Nombre del Municipio' | translate }}"
                      [formControl]="form.controls['MunicipalityId']"
                      (selectionChange)="form.controls['ShippingBusinessId'].setValue(null)"
                    >
                      <mat-option *ngFor="let municipio of municipalities" [value]="municipio.id">
                        {{ municipio.name }}
                      </mat-option>
                    </mat-select>
                    <mat-error *ngIf="form.controls['MunicipalityId'].hasError('required')">
                      {{ 'Municipio' | translate }} <strong>{{ 'is required' | translate }}</strong>
                    </mat-error>
                  </mat-form-field>
                </div>
              </ng-container>

              <!-- SOLO PARA EXTRANGEROS -->
            <ng-container *ngIf="!onlyCubanPeople">
                <p class="mat-body-2 my-2" style="text-transform: uppercase">
                  {{ "Customer's location data" | translate }}
                  <mat-icon
                    style="cursor: pointer"
                    matTooltip="{{
                      'Country, city, region and more information about the shipping location' | translate
                    }}"
                    class="iconHelp"
                    >help
                  </mat-icon>
                </p>
  
                <mat-form-field appearance="outline">
                  <mat-label>{{ 'Country' | translate }}</mat-label>
                  <mat-select
                    [compareWith]="compareById"
                    required
                    type="text"
                    placeholder="{{ 'Country name' | translate }}"
                    [formControl]="form.controls['CountryId']"
                  >
                    <mat-option *ngFor="let country of allCountries" [value]="country.id">
                      {{ utilsService.parserLanguage(country.name, language) }}
                    </mat-option>
                  </mat-select>
                  <mat-error *ngIf="form.controls['CountryId'].hasError('required')">
                    {{ 'Country' | translate }} <strong>{{ 'is required' | translate }}</strong>
                  </mat-error>
                </mat-form-field>
  
                <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                  <mat-form-field fxFlex="48" fxFlex.lt-md="100" appearance="outline">
                    <mat-label>{{ 'City' | translate }}</mat-label>
                    <input
                      type="text"
                      required
                      matInput
                      placeholder="{{ 'City' | translate }}"
                      required
                      [formControl]="this.form.controls['city']"
                    />
                    <mat-error *ngIf="form.controls['city'].hasError('required')">
                      {{ 'City' | translate }} <strong>{{ 'is required' | translate }}</strong>
                    </mat-error>
                  </mat-form-field>
  
                  <mat-form-field fxFlex="48" fxFlex.lt-md="100" appearance="outline">
                    <mat-label>{{ 'State / Province / Region' | translate }}</mat-label>
                    <input
                      type="text"
                      required
                      matInput
                      placeholder="{{ 'State / Province / Region' | translate }}"
                      required
                      [formControl]="this.form.controls['regionProvinceState']"
                    />
                    <mat-error *ngIf="form.controls['regionProvinceState'].hasError('required')">
                      {{ 'State / Province / Region' | translate }} <strong>{{ 'is required' | translate }}</strong>
                    </mat-error>
                  </mat-form-field>
                </div>
              </ng-container>

              <mat-form-field appearance="outline" class="w-100">
                <mat-label>{{ 'Street address' | translate }}</mat-label>
                <textarea
                  required
                  placeholder="{{ 'Street address or your location' | translate }}"
                  matInput
                  rows="2"
                  [formControl]="this.form.controls['address']"
                ></textarea>
                <mat-error *ngIf="form.controls['address'].hasError('required')">
                  {{ 'Address' | translate }} <strong>{{ 'is required' | translate }}</strong>
                </mat-error>
              </mat-form-field>

              <mat-form-field appearance="outline" class="w-100">
                <mat-label>{{ 'Add another address' | translate }}</mat-label>
                <textarea
                  
                  placeholder="{{ 'Street address or your location' | translate }}"
                  matInput
                  rows="2"
                  [formControl]="this.form.controls['address2']"
                ></textarea>
              </mat-form-field>

              <div fxLayout="row wrap" fxLayoutAlign="space-between center">
                <mat-form-field fxFlex="100" fxFlex.gt-md="48" fxFlex.md="48" appearance="outline">
                  <mat-label>{{ 'Identity card' | translate }}</mat-label>
                  <input
                    matInput
                    placeholder="{{ 'Identity card' | translate }}"
                    type="text"
                    required
                    [formControl]="this.form.controls['dni']"
                  />
                  <mat-error *ngIf="form.controls['dni'].hasError('required')">
                    {{ 'Identity card' | translate }} <strong>{{ 'is required' | translate }}</strong>
                  </mat-error>
                </mat-form-field>
  
                <mat-form-field fxFlex="100" fxFlex.gt-md="48" fxFlex.md="48" appearance="outline">
                  <mat-label>{{ 'Phone' | translate }}</mat-label>
                  <input
                    matInput
                    placeholder="{{ 'Phone' | translate }}"
                    type="tel"
                    [formControl]="this.form.controls['phone']"
                  />
                  <mat-error *ngIf="form.controls['phone'].hasError('required')">
                    {{ 'Phone' | translate }} <strong>{{ 'is required' | translate }}</strong>
                  </mat-error>
                  <mat-error *ngIf="form.controls['phone'].hasError('minlength')">
                    {{ 'El teléfono debe tener 10 dígitos' | translate }}
                  </mat-error>
                  <mat-error *ngIf="form.controls['phone'].hasError('maxlength')">
                    {{ 'El teléfono debe tener 10 dígitos' | translate }}
                  </mat-error>
                  <mat-error *ngIf="form.controls['phone'].hasError('pattern')">
                    {{ 'El teléfono debe tener solo dígitos' | translate }}
                  </mat-error>
                </mat-form-field>
              </div>

              <div class="add-info">
                <h3 class="grey-800" ngClass.gt-sm="h2" ngClass.xs="h4">{{ 'Aditional information' | translate }}</h3>
              </div>
              <div fxFlex="100" fxFlex.gt-sm="100" class="mt-1" ngClass.sm="mt-1" ngClass.xs="mt-1">
                <mat-form-field appearance="outline" class="w-100">
                  <textarea
                    placeholder="{{ 'Some information about your address or something important' | translate }}"
                    matInput
                    rows="2"
                    [formControl]="this.form.controls['info']"
                  ></textarea>
                </mat-form-field>
              </div>
            
        </div>

    </mat-dialog-content>
    <mat-dialog-actions>
        <div fxLayout="row" fxLayoutAlign="end center" fxFlex="100">
          <button color="primary" class="mr-2" mat-stroked-button mat-dialog-close>{{ 'CERRAR' | translate }}</button>
          
          <!-- *ngIf="order.status != 'confirmed'" -->
          <button
            color="primary"
            mat-flat-button
            class="mr-2"
            [disabled]="form.invalid"
            (click)="onUpdateOrder()"
          >
            {{ 'ACEPTAR' | translate }}
          </button>
        </div>
      </mat-dialog-actions>
</form>
