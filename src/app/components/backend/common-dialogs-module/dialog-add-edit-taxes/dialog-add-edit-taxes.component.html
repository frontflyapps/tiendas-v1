<div class="dialog-content-wrapper">

  <mat-toolbar class="mb-2" matDialogTitle color="primary" id="toolbarHeader">
    <mat-toolbar-row fxLayoutAlign="space-between center">
      <span class="mat-title mb-0">{{'Add tax'|translate}}</span>
      <button mat-icon-button (click)="dialogRef.close()" aria-label="Close dialog">
        <mat-icon>close</mat-icon>
      </button>
    </mat-toolbar-row>
  </mat-toolbar>

  <div mat-dialog-content class="my-dialog-content">
    <form [formGroup]="form">
      <div fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="gappx">

        <!-- <div fxLayout="row" class="mt-2" fxLayoutAlign="start start" fxLayoutGap="gappx">
          <span class="mat-body-2" style="text-transform: uppercase;">{{'Select your creation language'|translate}}
            <mat-icon matTooltip="{{'Default is Spanish'|translate}}" class="iconHelp">help</mat-icon></span>
        </div> -->

        <!-- <div fxLayout="row" class="mt-2" fxLayoutAlign="start start" fxLayoutGap="gappx">
          <mat-form-field fxFlex="100" appearance="outline">
            <mat-label> {{'Language'|translate}}</mat-label>
            <mat-select [compareWith]="compareFn" required [formControl]="languageForm"
              placeholder="{{'Language'|translate}}">
              <mat-option *ngFor="let language of this.languages;let i=index" [value]="language">
                <div fxLayout="row" fxLayoutAlign="start center">
                  <img [src]="language.image" style="height: 30px; width: 30px;">
                  <span class="ml-2 mat-body-2">
                    {{language.name}}
                  </span>
                </div>
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div> -->

        <mat-divider class="mb-2"></mat-divider>

        <mat-form-field appearance="outline">
          <mat-label>{{'Name'|translate}}</mat-label>
          <input required type="text" [formControl]="form.controls['name']" matInput placeholder="{{'Name'|translate}}">
          <mat-icon class="greyIcon" matSuffix>unarchive</mat-icon>
          <mat-error *ngIf="form.controls['name'].hasError('required')">
            {{'Name'|translate}} <strong>{{'is required'|translate}}</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>{{'Amount'|translate}}</mat-label>
          <input required type="number" matInput placeholder="{{'Price'|translate}}" [formControl]="form.controls['price']">
          <mat-icon class="greyIcon" matSuffix>attach_money</mat-icon>
          <mat-error *ngIf="form.controls['price'].hasError('required')">
            {{'Import'|translate}} <strong>{{'is required'|translate}}</strong>
          </mat-error>
        </mat-form-field>


        <p *ngIf="!this.isEditing" class="mat-body-2 py-2">
          <mat-checkbox [formControl]="form.controls['applyForAllCountries']">Aplicar para todos los paises</mat-checkbox>
        </p>

        <mat-form-field appearance="outline">
          <mat-label>{{'Country'|translate}}</mat-label>
          <input [readonly]="isEditing" required type="text" placeholder="{{'Country'|translate}}" aria-label="Assignee" matInput
            [formControl]="form.controls['CountryId']" [matAutocomplete]="auto">
          <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
            <mat-option *ngFor="let country of allCountries" [value]="country">
              {{country.name['es']}}
            </mat-option>
          </mat-autocomplete>
          <mat-error *ngIf="form.controls['CountryId'].hasError('required')">
            {{'Country'|translate}} <strong>{{'is required'|translate}}</strong>
          </mat-error>
        </mat-form-field>


        <mat-form-field appearance="outline">
          <mat-label>{{'Products'|translate}}</mat-label>
          <mat-select required multiple placeholder="{{'Products'|translate}}" [formControl]="form.controls['ProductIds']">
            <mat-option *ngFor="let product of this.Products" [value]="product.id">
              <span>
                {{(product.name[language])?product.name[language]:product.name['es']}}
              </span>
            </mat-option>
          </mat-select>
          <mat-error *ngIf="form.controls['ProductIds'].hasError('required')">
            {{'Product'|translate}} <strong>{{'is required'|translate}}</strong>
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>{{'Description'|translate}}</mat-label>
          <textarea required required rows="3" matInput [formControl]="form.controls['description']"
            placeholder="{{'Description'|translate}}"></textarea>
          <mat-icon class="greyIcon" matSuffix>edit</mat-icon>
          <mat-error *ngIf="form.controls['description'].hasError('required')">
            {{'Description'|translate}} <strong>{{'is required'|translate}}</strong>
          </mat-error>
        </mat-form-field>


      </div>
    </form>
  </div>

  <div mat-dialog-actions fxLayout="row" fxLayoutAlign="end start">
    <button mat-flat-button (click)="onSave()" [disabled]="this.form.invalid" color="primary">{{'Save'|translate}}</button>

  </div>

</div>
