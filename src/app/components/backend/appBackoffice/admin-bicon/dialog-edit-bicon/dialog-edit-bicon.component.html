<div class="dialog-content-wrapper">

  <mat-toolbar class="mb-2" matDialogTitle color="primary" id="toolbarHeader">
    <mat-toolbar-row fxLayoutAlign="space-between center">
      <span *ngIf="!isEditing" class="mat-title mb-0">{{'Adicione una pancarta de ícono'|translate}}</span>
      <span *ngIf="isEditing" class="mat-title mb-0">{{'Edite una pancarta de ícono'|translate}}</span>
      <button mat-icon-button (click)="dialogRef.close()" aria-label="Close dialog">
        <mat-icon>close</mat-icon>
      </button>
    </mat-toolbar-row>
  </mat-toolbar>

  <div mat-dialog-content class="my-dialog-content">
    <form [formGroup]="form">
      <div fxLayout="column" fxLayoutAlign="start stretch" fxLayoutGap="gappx">

        <div fxLayout="row" class="mt-2" fxLayoutAlign="start start" fxLayoutGap="gappx">
          <span class="mat-body-2" style="text-transform: uppercase;">{{'Select your creation language'|translate}}
            <mat-icon matTooltip="{{'Default is Spanish'|translate}}" class="iconHelp">help</mat-icon></span>
        </div>

        <div fxLayout="row" class="mt-2" fxLayoutAlign="start start" fxLayoutGap="gappx">
          <mat-form-field fxFlex="100" appearance="outline">
            <mat-label> {{'Language'|translate}}</mat-label>
            <mat-select [compareWith]="compareFn" required [formControl]="languageForm" placeholder="{{'Language'|translate}}">
              <mat-option *ngFor="let language of this.languages;let i=index" [value]="language">
                <div fxLayout="row" fxLayoutAlign="start center">
                  <img [src]="language.image" style="height: 30px; width: 30px;">
                  <span class="ml-2 mat-body-2">
                    {{language.name}}
                  </span>
                </div>
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <mat-divider class="mb-2"></mat-divider>

        <div class="mt-3" fxLayout="row wrap" fxLayoutAlign="space-between start" fxLayoutGap="gappx">
          <mat-form-field fxFlex="100" fxFlex.lt-md="100" appearance="outline">
            <mat-label>{{'Title'|translate}}</mat-label>
            <input required type="text" [formControl]="form.controls['title']" matInput placeholder="{{'Title'|translate}}">
            <mat-icon class="greyIcon" matSuffix>unarchive</mat-icon>
            <mat-error *ngIf="form.controls['title'].hasError('required')">
              {{'Title'|translate}} <strong>{{'is required'|translate}}</strong>
            </mat-error>
          </mat-form-field>

          <mat-form-field fxFlex="100" fxFlex.lt-md="100" appearance="outline">
            <mat-label>{{'SubTitle'|translate}}</mat-label>
            <textarea rows="1" matInput cdkTextareaAutosize #autosize="cdkTextareaAutosize" cdkAutosizeMinRows="1" cdkAutosizeMaxRows="5"
              [formControl]="form.controls['subTitle']" placeholder="{{'SubTitle'|translate}}"></textarea>
            <mat-icon class="greyIcon" matSuffix>edit</mat-icon>
          </mat-form-field>
        </div>

        <div fxLayout="row wrap" fxLayoutAlign="space-between start" fxLayoutGap="gappx">
          <mat-form-field fxFlex="100" fxFlex.lt-md="100" appearance="outline">
            <mat-label>{{'Icon'|translate}}</mat-label>
            <input required type="text" [formControl]="form.controls['icon']" matInput placeholder="{{'Icon'|translate}}">
            <mat-icon class="greyIcon" matSuffix>search</mat-icon>
            <mat-error *ngIf="form.controls['icon'].hasError('required')">
              {{'Icon'|translate}} <strong>{{'is required'|translate}}</strong>
            </mat-error>
          </mat-form-field>
        </div>

        <mat-divider class="mb-2"></mat-divider>

        <div fxLayout="row wrap" class="mt-2" fxLayoutAlign="space-between start" fxLayoutGap="gappx">
          <span class="mat-body-2" style="text-transform: uppercase;">{{'Select the icon for the banner'|translate}}
            <mat-icon
              matTooltip="{{'This is a representative icon of the action to be displayed. Its correct selection is important'|translate}}"
              class="iconHelp">help</mat-icon></span>

          <a class="mat-body-2 uppercase" style="color: #2196f3;" href="https://material.io/resources/icons/" target="_blank">
            {{'See material icons'|translate}}
            <mat-icon matTooltip="{{'Read about material design icons'|translate}}" class="iconHelp">help</mat-icon>
          </a>
        </div>

        <div class="mt-3" fxLayout="row wrap" fxLayoutAlign="start start" fxLayoutGap="gappx">

          <div *ngFor="let icon of filteredIcons" class="layoutIcons" (click)="onSelectedIcon(icon)"
            [ngClass]="{'selectedIcon':selectedIcon === icon }" fxFlex="30" fxFlex.sm="30" fxFlex.xs="50" style="height: 70px;"
            fxLayout="column" fxLayoutAlign="center center">
            <mat-icon class="greyIcon" style="height: 40px;width: 40px; font-size: 32px;">
              {{icon}}
            </mat-icon>
            <span class="mat-body-2">
              {{icon}}
            </span>
          </div>
        </div>

        <div class="mt-3" *ngIf="currentIndex < this.arrayIcons.length" fxLayout="row wrap" fxLayoutAlign="center start"
          fxLayoutGap="gappx">
          <button (click)="onLoadMoreIcons()" mat-stroked-button color="accent">{{'Load More'|translate}}</button>
        </div>


      </div>

    </form>




  </div>

  <div mat-dialog-actions fxLayout="row" fxLayoutAlign="end start">
    <button mat-flat-button (click)="onSave()" [disabled]="this.form.invalid" color="primary">{{'Save'|translate}}</button>

  </div>

</div>
